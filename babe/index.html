<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Get Well Soon ‚ù§Ô∏è</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="background-mesh"></div>
    <div class="background-dimmer"></div>

    <div id="overlay">
        <div class="notification-stack">
            <div class="notif-header">
                <div style="display:flex; align-items:center; gap:6px;">
                    <div class="notif-icon"></div>
                    <span>Messages ‚Ä¢ Now</span>
                </div>
            </div>
            <h2 style="margin: 0 0 8px 0; font-size: 20px;">Avuyile Mthembu</h2>
            <p style="margin: 0; color: #333; font-size: 15px;">Sent you a Get Well Soon card...</p>
            <button id="start-btn">View Card</button>
        </div>
    </div>

    <div class="container" id="main-content">
        <div class="ios-card">
            <div class="header-text">Get Well Soon</div>
            
            <div class="image-container">
                <img id="story-img" src="images/babe.jpg" alt="Memory">
            </div>

            <div class="message-bubble">
                <div class="story-text">
                    <span id="typewriter"></span><span class="cursor"></span>
                </div>
            </div>

            <span class="signature">With Love, Avuyile</span>
        </div>
    </div>

    <div id="music-pill">
        <div class="music-info">
            <span class="music-title">Lofi Healing Vibes</span>
            <span class="music-status" id="music-status">Tap to Pause</span>
        </div>
        <div class="visualizer" id="visualizer">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
    </div>

    <audio id="bg-music" loop>
        <source src="https://cdn.pixabay.com/download/audio/2022/05/27/audio_1808fbf07a.mp3?filename=lofi-study-112191.mp3" type="audio/mpeg">
    </audio>

    <script>
        const startBtn = document.getElementById('start-btn');
        const overlay = document.getElementById('overlay');
        const mainContent = document.getElementById('main-content');
        const audio = document.getElementById('bg-music');
        const musicPill = document.getElementById('music-pill');
        const musicStatus = document.getElementById('music-status');
        const visualizer = document.getElementById('visualizer');
        const typewriterSpan = document.getElementById('typewriter');
        const storyImg = document.getElementById('story-img');

        // --- CUSTOMIZATION ---
        const photos = [
            "images/babe1.jpg",
            "images/babe2.jpg", 
            "images/babe3.jpg"
        ];

        const messages = [
            "Hey love, I know you're not feeling 100%... üòî",
            "I wish I could teleport there to hug you. ü´Ç",
            "Just remember to rest and drink water. üíß",
            "You are strong, beautiful, and loved. ‚ù§Ô∏è",
            "Can't wait to see your healthy smile again!"
        ];

        const icons = ['‚ù§Ô∏è', 'ü©π', 'üå∏', '‚ú®', 'üíä', 'üß∏', 'üíù'];

        // --- STATE & LOGIC ---
        let photoIndex = 0;
        let messageIndex = 0;
        let charIndex = 0;
        let isMusicPlaying = false;

        // Initialization
        storyImg.style.opacity = 1;

        startBtn.addEventListener('click', () => {
            // 1. Play Audio
            audio.volume = 0.5;
            audio.play().then(() => {
                isMusicPlaying = true;
                updateMusicUI();
            }).catch(e => console.log("Audio autoplay blocked", e));

            // 2. Hide Overlay
            overlay.classList.add('hidden');
            
            // 3. Show Main Content
            setTimeout(() => {
                mainContent.style.opacity = '1';
                musicPill.style.opacity = '1';
                
                // Start loops
                startFloatingElements();
                startPhotoSlideshow();
                typeMessage();
            }, 600);
        });

        // Typing Effect
        function typeMessage() {
            if (messageIndex >= messages.length) messageIndex = 0;
            
            const currentText = messages[messageIndex];
            
            if (charIndex < currentText.length) {
                typewriterSpan.textContent += currentText.charAt(charIndex);
                charIndex++;
                setTimeout(typeMessage, 45);
            } else {
                setTimeout(eraseMessage, 2500);
            }
        }

        function eraseMessage() {
            if (charIndex > 0) {
                typewriterSpan.textContent = messages[messageIndex].substring(0, charIndex - 1);
                charIndex--;
                setTimeout(eraseMessage, 20);
            } else {
                messageIndex++;
                setTimeout(typeMessage, 500);
            }
        }

        // Photo Slideshow
        function startPhotoSlideshow() {
            setInterval(() => {
                photoIndex = (photoIndex + 1) % photos.length;
                storyImg.style.opacity = 0;
                setTimeout(() => {
                    storyImg.src = photos[photoIndex];
                    storyImg.onload = () => { storyImg.style.opacity = 1; };
                }, 500);
            }, 5000);
        }

        // Floating Hearts/Icons (UPDATED LOGIC)
        function startFloatingElements() {
            setInterval(() => {
                const el = document.createElement('div');
                el.classList.add('floating-element');
                el.innerText = icons[Math.floor(Math.random() * icons.length)];
                
                // Random positioning logic
                const startLeft = Math.random() * 90 + 5; // 5% to 95% width
                el.style.left = startLeft + 'vw';
                
                // INCREASED SIZE: 30px to 60px (Previously 20-40)
                el.style.fontSize = (Math.random() * 30 + 30) + 'px';
                
                el.style.animationDuration = (Math.random() * 5 + 6) + 's';
                
                document.body.appendChild(el);
                setTimeout(() => el.remove(), 11000);
            }, 1000); // Slightly faster generation
        }

        // Music Controls
        musicPill.addEventListener('click', () => {
            if (isMusicPlaying) {
                audio.pause();
                isMusicPlaying = false;
            } else {
                audio.play();
                isMusicPlaying = true;
            }
            updateMusicUI();
        });

        function updateMusicUI() {
            if (isMusicPlaying) {
                musicStatus.innerText = "Playing";
                visualizer.style.opacity = 1;
            } else {
                musicStatus.innerText = "Paused";
                visualizer.style.opacity = 0.3;
            }
        }

        // Touch Interaction (Burst of hearts on tap)
        document.addEventListener('touchstart', (e) => {
            if(overlay.classList.contains('hidden')) {
                const touch = e.touches[0];
                createBurst(touch.clientX, touch.clientY);
            }
        });

        function createBurst(x, y) {
            for(let i=0; i<3; i++) {
                const el = document.createElement('div');
                el.classList.add('floating-element');
                el.innerText = "‚ù§Ô∏è";
                el.style.left = x + 'px';
                el.style.top = y + 'px';
                el.style.animation = "floatUp 2s ease-out forwards";
                el.style.fontSize = "34px"; // Larger burst size
                
                // Remove text shadow for burst specifically if desired, but keeping it looks consistent
                
                document.body.appendChild(el);
                setTimeout(() => el.remove(), 2000);
            }
        }
    </script>
</body>
</html>
